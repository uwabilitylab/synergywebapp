{% extends "bootstrap/base.html" %}

{% block title %}Flasky{% endblock %}

{% block navbar %}
<div class="navbar navbar-inverse" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle"
      data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"</span>
        <span class="icon-bar"</span>
        <span class="icon-bar"</span>
      </button>
      <a class="navbar-brand" href="/">NNMF</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="/">Home</a></li>
      </ul>
    </div>
  </div>
</div>
{% endblock %}

{% block content %}
<div class="container">
  <div class="page-header">
    <h4>Calculate Muscle Synergies</h4>
      <head>
        <title>Scatter Chart</title>
        <script src="/static/Chart.bundle.js"></script>
        <script src="/static/utils.js"></script>
        <style>
        canvas {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
        }
        </style>
      </head>
      <div id = 'charts'></div>
      <body>
        <script>
        var results = {{resultsJson}}
        var chartList = document.getElementById('charts');
        for (var item in results) {
          var canvas = document.createElement('canvas');
          canvas.setAttribute('width', 400);
          canvas.setAttribute('height', 100);
          chartList.appendChild(canvas);
          var color = Chart.helpers.color;
          var scatterChartData = {
            datasets: [{
                label:"Unfiltered",
                borderColor: window.chartColors.red,
                pointRadius: .5,
                backgroundColor: color(window.chartColors.red).alpha(0.2).rgbString(),
                data: [{% for exes,whys,filts in item %}
                           {x: {{exes}},
                           y: {{whys}},
                          },
                       {% endfor %}

                ]
              },{
                label:"Filtered",
                borderColor: window.chartColors.blue,
                pointRadius: .5,
                backgroundColor: color(window.chartColors.blue).alpha(0.2).rgbString(),
                data: [{% for exes,whys,filts in item %}
                           {x: {{exes}},
                           y: {{filts}},
                          },
                       {% endfor %}

                ]
              }]
            };
          var ctx = canvas.getContext('2d');
          window.myScatter = Chart.Scatter(ctx, {
            scaleOverride: true,
            scaleSteps: 10,
            scaleStepWidth: .00001,
            scaleStartValue: -0.0001,
            scaleShowVerticalLines: true,
            scaleShowGridLines : true,
            data: scatterChartData,
            options: {
                showLine: true,
                title: {
                    display: true,
                },
              }
          });
        }
        </script>
      </body>
  </div>
</div>
{% endblock %}
